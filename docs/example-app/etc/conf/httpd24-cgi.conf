<VirtualHost *:80>
    ServerName        myapp.example.com
    ServerAlias local.myapp.example.com
    ServerAdmin default

    UseCanonicalName Off

    DocumentRoot sites/myapp.example.com/web
    CustomLog    sites/myapp.example.com/etc/log/httpd-access.log  combined
    ErrorLog     sites/myapp.example.com/etc/log/httpd-error.log

    # .htaccess files must be disabled globally. Otherwise Apache will happily scan for and apply
    # files found in DocumentRoot's parent directories, i.e. the project's root directory.
    <Directory />
        AllowOverride None
    </Directory>
    <Directory sites/myapp.example.com/web>
        Require all granted
    </Directory>


    AddDefaultCharset UTF-8
    DirectoryIndex index.html index.php
    Options FollowSymLinks ExecCGI

    RewriteEngine On
    RewriteCond   %{DOCUMENT_ROOT}%{REQUEST_FILENAME}  !-d
    RewriteCond   %{DOCUMENT_ROOT}%{REQUEST_FILENAME}  !-f
    RewriteRule   ^                                    /index.php  [QSA,L]
    #LogLevel     warn rewrite:trace6

    <Files "*.php">
        <IfModule mod_cgid.c>
            MaxRequestsPerProcess  5000
        </IfModule>
        <IfModule mod_fcgid.c>
            SetHandler   fcgid-script
            FcgidWrapper "${APACHE_SRVROOT_DIR}/sites/myapp.example.com/etc/conf/cgi-bin/php-wrapper" .php
        </IfModule>
    </Files>
    <IfModule mod_suexec.c>
        SuexecUserGroup {username} {groupname}
    </IfModule>

    SetEnv  APPLICATION_BASE_URI  '/'
</VirtualHost>
