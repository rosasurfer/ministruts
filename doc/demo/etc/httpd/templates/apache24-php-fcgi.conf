<VirtualHost *:80>
    ServerName        demo.ministruts.com
    ServerAlias local.demo.ministruts.com
    ServerAdmin default

    UseCanonicalName Off

    DocumentRoot "${SITES}/demo.ministruts.com/web"
    CustomLog    "${SITES}/demo.ministruts.com/etc/log/httpd-access.log"  combined
    ErrorLog     "${SITES}/demo.ministruts.com/etc/log/httpd-error.log"

    <Directory "/">
        AllowOverride None
        Require all denied
    </Directory>
    <Directory "${SITES}/demo.ministruts.com/web">
        Require all granted
    </Directory>

    DirectoryIndex index.php index.html 
    Options        FollowSymLinks

    RewriteEngine On
    RewriteCond   %{LA-U:REQUEST_FILENAME}  !-d
    RewriteCond   %{LA-U:REQUEST_FILENAME}  !-f
    RewriteRule   ^                         /index.php  [NS,L]
    #LogLevel     warn rewrite:trace6

    # FcgidMaxRequestsPerProcess should be <= PHP_FCGI_MAX_REQUESTS in the FcgidWrapper script. 
    FcgidMaxRequestsPerProcess 2000

    <Files "*.php">
        Options      +ExecCGI
        SetHandler   fcgid-script
        FcgidWrapper "${SITES}/demo.ministruts.com/etc/conf/cgi-bin/php-wrapper" .php
    </Files>
    <IfModule mod_suexec.c>
        # With mod_suexec FcgidWrapper must point to a permitted executable (see suexec -V).
        SuexecUserGroup {username} {groupname}
    </IfModule>

    SetEnv APP_BASE_URI '/'
</VirtualHost>
